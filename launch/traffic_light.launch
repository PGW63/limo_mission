<?xml version="1.0"?>
<launch>
    <!-- 
    Traffic Light Detection
    - Lane tracing with traffic light recognition
    -->
    
    <arg name="camera_topic" default="/camera/color/image_raw/compressed"/>
    <arg name="show_image" default="true"/>
    
    <!-- Lane Detection Node (steering only, traffic_light_node handles cmd_vel) -->
    <node pkg="limo_mission" type="lane_detect_node.py" name="lane_detect_node" output="screen">
        <rosparam file="$(find limo_mission)/config/lane_detect.yaml" command="load"/>
        <remap from="/camera/color/image_raw/compressed" to="$(arg camera_topic)"/>
    </node>
    
    <!-- Traffic Light Node -->
    <node pkg="limo_mission" type="traffic_light_node.py" name="traffic_light_node" output="screen">
        <rosparam file="$(find limo_mission)/config/traffic_light.yaml" command="load"/>
        <remap from="/camera/color/image_raw/compressed" to="$(arg camera_topic)"/>
    </node>
    
    <!-- Image Viewers -->
    <node if="$(arg show_image)" pkg="rqt_image_view" type="rqt_image_view" name="lane_viewer" args="/limo/lane_detect/image"/>
    <node if="$(arg show_image)" pkg="rqt_image_view" type="rqt_image_view" name="traffic_viewer" args="/limo/traffic_light/image"/>

</launch>
